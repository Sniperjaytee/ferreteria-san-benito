{% extends 'base.html' %}

{% block title %}Checkout{% endblock %}

{% block content %}
<main class="container mx-auto px-3 py-6 sm:px-4 sm:py-8">
  <h1 class="text-2xl font-bold mb-4">Checkout</h1>
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    <section class="md:col-span-2 bg-white rounded-lg shadow p-4">
      <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="mb-4">
          <label class="block text-sm font-medium mb-1">Método de pago</label>
          <select name="metodo_pago" class="w-full border rounded px-3 py-2">
            <option value="efectivo">Efectivo</option>
            <option value="transferencia">Transferencia Bancaria</option>
            <option value="pago_movil">Pago Móvil</option>
            <option value="zelle">Zelle</option>
            <option value="paypal">PayPal</option>
            <option value="binance">Binance Pay</option>
            <option value="tarjeta">Tarjeta</option>
          </select>
        </div>
        <div class="mb-4">
          <label class="block text-sm font-medium mb-1">Comprobante (opcional)</label>
          <input type="file" name="comprobante_pago" class="w-full border rounded px-3 py-2"/>
        </div>
        <div class="mb-4">
          <label class="block text-sm font-medium mb-1">Notas</label>
          <textarea name="notas_pago" class="w-full border rounded px-3 py-2" rows="3" placeholder="Detalles del pago"></textarea>
        </div>
        <button class="px-4 py-2 rounded bg-primary text-white">Confirmar pedido</button>
      </form>
    </section>
    <aside class="bg-white rounded-lg shadow p-4">
      <h2 class="font-semibold mb-3">Resumen</h2>
      <ul class="space-y-2 text-sm">
        {% for it in items %}
        <li class="flex justify-between">
          <span>{{ it.producto.nombre }} x{{ it.cantidad }}</span>
          <span>${{ it.subtotal }}</span>
        </li>
        {% endfor %}
      </ul>
      <div class="border-t mt-3 pt-3 flex justify-between font-bold">
        <span>Total</span>
        <span>${{ total }}</span>
      </div>
    </aside>
  </div>
</main>
{% endblock %}

